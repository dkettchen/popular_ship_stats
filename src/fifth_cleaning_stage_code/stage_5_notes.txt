
goals for this:
    have a list of dicts of character info per character, which contains correct gender value ✅
        go through sets in reverse order ✅
            most recent to oldest, femslash, then yearly, then overall ✅
            -> make a list of file paths in order ✅
        collect gender values per character ✅
            capture latest same-sex value separately (so if it's f/f or m/m) ✅
            capture latest (in general) value too (if it is diff from same sex) ✅
            capture all unique values in a collection ✅
        if both latest value are (same) same sex, they can be assigned that one as their current gender ✅
        go through all where at least one latest value is not same sex ✅
            manually assign them as appropriate ✅
        verify any Other characters you know of ✅
            (angels, gems, canon gender queers, shapeshifters, player characters, drags, etc)
    remove gender column from main data set when running next stage file creation

    have a list of dicts of character info per character, which ALSO contains correct race value ✅
        go through sets in order again ✅
            to collect:
                most recent value (whole list or str) ✅
                if list: 
                    index in pairing
                        -guess who just learned that sometimes it's the wrong way around smh
                            - power ranger girlies are wrong way around for one
                            - so is ruby rose rwby- or wait no op notes said she's implied 
                                to be half-asian hence is now labelled as asian huh
                                -which also means our same-race labels aren't reliable 
                                bc in her case those will be the old one fuck
                                -> go in order
                                    -if most recent value is same-race -> use
                                    -else use most recent value w index (and we'll just have to double check em all)
                                    -and then we need to verify any old labels anyway
                    if pairing has more than 2 ppl:
                        a note abt that
                all unique values (make lists into strings again??)
            if they're white they should be able to be assigned no problem
            if they're poc in recent sets they will also be assigned properly 
                see who's leftover in old values
                    look em up
        research & replace asian labels w more cardinal direction specificity
        add correct labels to everyone's gender assigned dicts
            have a cursory look at some of em to verify 
                (ie all the things we know have poc vs only white ppl in em)
    remove race column from main data set when running next stage file creation

- fix player characters that can be gendered/have been specified in sets ✅
- fix persona guy too ✅

- make a buncha makefile commands to run stage 4 & stage 5 fandoms, name, & demographics updates ✅
    - make update_fandoms ✅
    - make update_names ✅
    - make update_demographics ✅
    - make update_characters -> which runs the two previous ones together ✅
    - make update_characters_and_fandoms -> which runs all of them ✅
    (names are wt)
    -> will need a venv command too to use
    -> add to this as we continue making other files etc
-> cause after this stage if I need to correct or add something to these fuckers (such as for 
tumblr data sets) we'll have to rerun EVERYTHING, and it'll become too many things to copy paste


source venv/bin/activate && export PYTHONPATH=$(pwd)

python src/fifth_cleaning_stage_code/collect_gender_tags_per_character.py
python src/fifth_cleaning_stage_code/assign_gender_per_character.py
python src/fifth_cleaning_stage_code/collect_race_tags_per_character.py
python src/fifth_cleaning_stage_code/assign_race_tag_per_character.py

python src/util_functions/make_data_set_table.py